\errorcontextlines99999
\documentclass{article}

\usepackage{tikz}
\usepackage[prefix=]{xcolor-material}
\usepackage{xspace} % :3
\usepackage{etoolbox}
\usepackage{amsmath}

\makeatletter
% hacky but this way i do not have to make anything active :3
\def\lc@enablechars{\@for\@l:={a,b,c,d,e,f,g,h,j,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}\do{\expandafter\expandafter\expandafter\edef\expandafter\csname\@l\endcsname{\@l\noexpand\xspace}}}%
\def\lc@enableshortcuts{%
\let\mathequiv\equiv
\def\equiv{\ensuremath{\mathequiv}\xspace}%
\def\Y{\mbox{\textbf{Y}}\xspace}% TODO: highlight Y combinator
}
\def\lc@init@colorcycle{\@tempcnta\z@\@for\@col:={red,orange,yellow,green,cyan,teal,blue,purple,magenta}\do{\expandafter\expandafter\expandafter\edef\expandafter\csname lc@color@\the\@tempcnta\endcsname{\@col}\advance\@tempcnta\@ne}\edef\lc@colors@exclusivemax{\the\@tempcnta}}%
\lc@init@colorcycle
\def\lc@EnableCharForHl#1#2{\begingroup\typeout{#1:#2}\lccode`\\#2=\active
\lowercase{\endgroup \catcode`#2=\active \def#2}{\lc@colorvar{#1}{#2}\xspace}}

\def\lc@colorvar#1#2{\tikz[baseline=(@.base)]{\node[fill=#1!10,rounded corners=3pt,inner ysep=1pt,inner xsep=2.25pt] (@) {\strut#2};}%
\lc@EnableCharForHl{#1}{#2}\def\lc@curcol{#1}%
}
\newcounter{lc@colorcycle}% switch to newcount?
\def\lc@colorcycle{\stepcounter{lc@colorcycle}\ifnum\thelc@colorcycle<\lc@colors@exclusivemax\else
   \setcounter{lc@colorcycle}{0}% assume at least one
\fi
\edef\@col{\csname lc@color@\thelc@colorcycle\endcsname}\stepcounter{lc@colorcycle}}%
\def\lc@dot{\textcolor{gray}{.}}
% TODO: color brackets/larger to match
\newcount\c@lc@bracketlevel
% TODO: colors?
\def\lc@open{$\underset{\raisebox{1.5pt}{\mbox{\tiny\color{lightgray}\the\c@lc@bracketlevel}}}{\mbox{(}}$\begingroup\advance\c@lc@bracketlevel\@ne}
\def\lc@close{\endgroup$\underset{\raisebox{1.5pt}{\mbox{\tiny\color{lightgray}\the\c@lc@bracketlevel}}}{\mbox{)}}$}
% TODO: replacements like \cons
% TODO: allow to draw arrows
% TODO: re-use colors?
\xspaceaddexceptions{\lc@close}%
\def\lc@enable{%
   \let\\\relax
   \newcommand*\\[2][]{\ifstrempty{##1}{\lc@colorcycle}{\edef\@col{##1}}\ensuremath{\color{\@col}\lambda}\expandafter\lc@colorvar\expandafter{\@col}{##2}}%
   \let\.\lc@dot
   \lc@enablechars
   \lc@enableshortcuts
   % \lc@init@colorcycle % done globally
   \let\(\lc@open
   \let\)\lc@close
   % set to 0 even if unbalanced
   \c@lc@bracketlevel\z@
   \setcounter{lc@colorcycle}{0}%
}
\long\def\LC#1{\texttt{\lc@enable#1}}

\begin{document}
\LC{\\a\.b \(a \(\\b\.\(\\a\.b\) b c a\)\)}%

\LC{\Y \equiv \\f.\(\\x.f \(x x\)\) \(\\x.f \(x x\)\)}
\end{document}